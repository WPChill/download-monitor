jQuery(document).ready(function(a){a(".dlm-keygen-user-select").select2({ajax:{url:dlm_ajax.ajaxurl,dataType:"json",delay:250,data:function(e){return{q:e.term,action:"dlm_keygen_search_users",_ajax_nonce:dlm_ajax.nonce}},processResults:function(e){return{results:e}},cache:!0},minimumInputLength:2,placeholder:"Search for a user",width:"400px"}),a(document).on("click",".dlm-keygen-generate",function(e){e.preventDefault(),user_id=a(this).parent().find(".dlm-keygen-user-select").val(),a.ajax({url:dlm_ajax.ajaxurl,type:"POST",dataType:"json",data:{user_id:user_id,action:"dlm_action_api_key",dlm_action:"generate",_ajax_nonce:dlm_ajax.nonce},success:function(e){e.success&&location.reload()},error:function(e,a,n){console.error("Error: "+a+", "+n)}})}),a(document).on("click",".dlm-regenerate-key",function(e){e.preventDefault();e=a(this).data("user-id");a.ajax({url:dlm_ajax.ajaxurl,type:"POST",dataType:"json",data:{user_id:e,action:"dlm_action_api_key",dlm_action:"regenerate",_ajax_nonce:dlm_ajax.nonce},success:function(e){e.success&&location.reload()},error:function(e,a,n){console.error("Error: "+a+", "+n)}})}),a(document).on("click",".dlm-revoke-key",function(e){e.preventDefault();e=a(this).data("user-id");a.ajax({url:dlm_ajax.ajaxurl,type:"POST",dataType:"json",data:{user_id:e,action:"dlm_action_api_key",dlm_action:"revoke",_ajax_nonce:dlm_ajax.nonce},success:function(e){e.success&&location.reload()},error:function(e,a,n){console.error("Error: "+a+", "+n)}})})});