jQuery(function(m){function _(d,e){var r=m("<div>").addClass("dlm-checkout-error");r.append(m("<img>").attr("src",dlm_strings.icon_error).attr("alt","Checkout error").addClass("dlm-checkout-error-icon")),r.append(m("<p>").html(e)),d.prepend(r)}function u(d){var e=m(".dlm-checkout-overlay:first"),r=m(".dlm-checkout-overlay-bg:first");e.fadeOut(300,function(){e.remove()}),r.fadeOut(300,function(){r.remove(),m(d).find("#dlm_checkout_submit").attr("disabled",!1)})}m("#dlm-form-checkout").submit(function(d){for(var e,r=m(this),a=(m(r).find(".dlm-checkout-field-error").removeClass("dlm-checkout-field-error"),r.find(".dlm-checkout-error").remove(),m(t=r).find("#dlm_checkout_submit").attr("disabled",!0),t=m("<div>").addClass("dlm-checkout-overlay-bg"),(e=m("<div>").addClass("dlm-checkout-overlay")).append(m("<h2>").html(dlm_strings.overlay_title)),e.append(m("<span>").html(dlm_strings.overlay_body)),e.append(m("<img>").attr("src",dlm_strings.overlay_img_src)),m("body").append(t),m("body").append(e),t.fadeIn(300,function(){e.css("display","block").css("top","47%"),e.animate({top:"+=3%"},300)}),{first_name:r.find("#dlm_first_name").val(),last_name:r.find("#dlm_last_name").val(),company:r.find("#dlm_company").val(),email:r.find("#dlm_email").val(),address_1:r.find("#dlm_address_1").val(),postcode:r.find("#dlm_postcode").val(),city:r.find("#dlm_city").val(),country:r.find("#dlm_country").val()}),t={payment_gateway:m("input[name=dlm_gateway]:checked",m(this)).val(),customer:a},l=(void 0!==r.data("order_id")&&(t.order_id=r.data("order_id")),void 0!==r.data("order_hash")&&(t.order_hash=r.data("order_hash")),[]),i=!0,o=0;o<dlm_strings.required_fields.length;o++)""===a[dlm_strings.required_fields[o]]&&(i=!1,l.push(dlm_strings.required_fields[o]));if(!1===i){for(var s=r,n=l,c=0;c<n.length;c++)m(s).find("#dlm_"+n[c]).addClass("dlm-checkout-field-error");_(r,dlm_strings.error_message_required_fields),u(r)}else m.post(dlm_strings.ajax_url_place_order,t,function(d){if(!0===d.success&&void 0!==d.redirect)return window.location.replace(d.redirect),!1;!1===d.success&&""!==d.error&&_(r,d.error),u(r)});return!1})});