jQuery(function(d){d.each(d(".extension_license a"),function(e,a){d(a).click(function(){var s=d(a).closest(".extension_license"),n=s.next(".license-status");const i=d(this);d("body").addClass("loading"),i.css("pointer-events","none");var t="inactive"==d(s).find("#status").val()?"activate":"deactivate";d(s).find(".dlm_license_error").remove(),d.post(ajaxurl,{action:"dlm_extension",nonce:d("#dlm-ajax-nonce").val(),product_id:d(s).find("#product_id").val(),key:d(s).find("#key").val(),email:d(s).find("#email").val(),extension_action:t,action_trigger:"-ext-license"},function(e){d("body").removeClass("loading"),"failed"==e.result?d(s).prepend(d("<div>").addClass("dlm_license_error").html(e.message)):"activate"==t?(n.addClass("active").html("ACTIVE"),d(s).find(".button").html("Deactivate"),d(s).find("#status").val("active"),d(s).find("#key").attr("disabled",!0),d(s).find("#email").attr("disabled",!0)):(n.removeClass("active").html("INACTIVE"),d(s).find(".button").html("Activate"),d(s).find("#status").val("inactive"),d(s).find("#key").attr("disabled",!1),d(s).find("#email").attr("disabled",!1)),i.css("pointer-events","auto")})})}),d("#dlm-master-license-btn").on("click",e=>{e.preventDefault();const s=d(e.target),n=s.parents(".dlm-master-license"),i=d("#dlm-master-license").val(),t=d("#dlm-master-license-email").val(),a=n.find('input[type="hidden"]').val(),l=s.data("action"),r=(n.parent().find(".extension_license"),"activate"==l?extensions_vars.activate:extensions_vars.deactivate);return s.css("pointer-events","none"),""===i?(s.css("pointer-events","auto"),n.find(".dlm-master-license-response").remove(),void n.append('<div class="dlm-master-license-response">'+extensions_vars.missing_license+"</div>")):""===t?(s.css("pointer-events","auto"),n.find(".dlm-master-license-response").remove(),void n.append('<div class="dlm-master-license-response">'+extensions_vars.missing_email+"</div>")):(s.attr("disabled","disabled"),n.append('<div class="dlm-master-license-response">'+r+"</div>"),void d.post(ajaxurl,{action:"dlm_master_license",nonce:a,key:i,email:t,extension_action:l,action_trigger:"-master-license"},function(e){s.removeAttr("disabled"),"failed"==e.result?(n.find(".dlm-master-license-response").remove(),n.append('<div class="dlm-master-license-response">'+e.message+"</div>")):window.location.href=window.location.href,s.css("pointer-events","auto")}))}),d("#dlm-forgot-license").on("click",e=>{e.preventDefault();const s=d(e.target),n=s.data("nonce"),i=s.parents(".dlm-master-license"),t=d("#dlm-master-license-email"),a=t.val();if(s.css("pointer-events","none"),d(".dlm-master-license-response").remove(),i.append('<div class="dlm-master-license-response">'+extensions_vars.reaching_server+"</div>"),!a||""===a)return i.find(".dlm-master-license-response").remove(),i.append('<div class="dlm-master-license-response">'+extensions_vars.missing_email+"</div>"),t.prop("required",!0),void s.css("pointer-events","auto");d.post(ajaxurl,{action:"dlm_forgot_license",nonce:n,email:a},function(e){s.removeAttr("disabled"),void 0===e.result?(i.find(".dlm-master-license-response").remove(),i.append('<div class="dlm-master-license-response">'+extensions_vars.forget_license_error+"</div>")):(t.prop("required",!1),i.find(".dlm-master-license-response").remove(),i.append('<div class="dlm-master-license-response">'+e.message+"</div>"),s.css("pointer-events","auto"))}),s.css("pointer-events","none")})});